{"uid":"9e60cab3722f3f65","name":"Validate Council Output [BoltonCouncil]","fullName":"features/validate_council_outputs.feature:Validate Council Output","historyId":"c59a7b02ce88bbad9f9cdf4a119aec6c","time":{"start":1699060439019,"stop":1699060499623,"duration":60604},"status":"failed","statusMessage":"AssertionError: True","statusTrace":"fixturefunc = <function validate_output_step at 0x7f48d87e67a0>\nrequest = <FixtureRequest for <Function test_scenario_outline[BoltonCouncil]>>\nkwargs = {'context': <test_validate_council.context.<locals>.Context object at 0x7f48d315fbb0>}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/_pytest/fixtures.py:902: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:94: in validate_output_step\n    raise (err)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncontext = <test_validate_council.context.<locals>.Context object at 0x7f48d315fbb0>\n\n    @then(\"the output should validate against the schema\")\n    def validate_output_step(context):\n        try:\n            council_schema = file_handler.load_schema_file(f\"output.schema\")\n            schema_result = file_handler.validate_json_schema(\n                context.parse_result, council_schema\n            )\n>           assert_that(schema_result, True)\nE           AssertionError: True\n\nuk_bin_collection/tests/step_defs/test_validate_council.py:89: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AssertionError: True","statusTrace":"fixturefunc = <function validate_output_step at 0x7f48d87e67a0>\nrequest = <FixtureRequest for <Function test_scenario_outline[BoltonCouncil]>>\nkwargs = {'context': <test_validate_council.context.<locals>.Context object at 0x7f48d315fbb0>}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/_pytest/fixtures.py:902: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:94: in validate_output_step\n    raise (err)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncontext = <test_validate_council.context.<locals>.Context object at 0x7f48d315fbb0>\n\n    @then(\"the output should validate against the schema\")\n    def validate_output_step(context):\n        try:\n            council_schema = file_handler.load_schema_file(f\"output.schema\")\n            schema_result = file_handler.validate_json_schema(\n                context.parse_result, council_schema\n            )\n>           assert_that(schema_result, True)\nE           AssertionError: True\n\nuk_bin_collection/tests/step_defs/test_validate_council.py:89: AssertionError","steps":[{"name":"Given the council: BoltonCouncil","time":{"start":1699060439019,"stop":1699060439020,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"When we scrape the data from BoltonCouncil","time":{"start":1699060439020,"stop":1699060499619,"duration":60599},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Then the result is valid json","time":{"start":1699060499620,"stop":1699060499620,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"And the output should validate against the schema","time":{"start":1699060499620,"stop":1699060499623,"duration":3},"status":"failed","statusMessage":"True","statusTrace":"AssertionError: True\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":4,"attachmentsCount":0,"hasContent":true},"afterStages":[],"labels":[{"name":"host","value":"fv-az400-886"},{"name":"thread","value":"2565-MainThread"},{"name":"framework","value":"pytest-bdd"},{"name":"language","value":"cpython3"},{"name":"feature","value":"Test each council output matches expected results"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"BoltonCouncil"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":73,"broken":0,"skipped":0,"passed":103,"unknown":0,"total":176},"items":[{"uid":"bad05c912dd35f07","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1100//#testresult/bad05c912dd35f07","status":"passed","time":{"start":1699007578948,"stop":1699007584881,"duration":5933}},{"uid":"64c9276f3e4a7695","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1095//#testresult/64c9276f3e4a7695","status":"passed","time":{"start":1698988549597,"stop":1698988557055,"duration":7458}},{"uid":"8e0e777506b2aef9","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1094//#testresult/8e0e777506b2aef9","status":"passed","time":{"start":1698974079844,"stop":1698974084026,"duration":4182}},{"uid":"28cf2c413da051eb","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1091//#testresult/28cf2c413da051eb","status":"passed","time":{"start":1698887625635,"stop":1698887631680,"duration":6045}},{"uid":"a3730096b189500a","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1090//#testresult/a3730096b189500a","status":"passed","time":{"start":1698878270036,"stop":1698878273111,"duration":3075}},{"uid":"926b93e504644b65","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1086//#testresult/926b93e504644b65","status":"passed","time":{"start":1698867377266,"stop":1698867380821,"duration":3555}},{"uid":"567ceb412013d7e9","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1087//#testresult/567ceb412013d7e9","status":"passed","time":{"start":1698867409811,"stop":1698867413512,"duration":3701}},{"uid":"6503521455f3530f","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1081//#testresult/6503521455f3530f","status":"passed","time":{"start":1698801505897,"stop":1698801509343,"duration":3446}},{"uid":"de1b70140e0b4236","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1079//#testresult/de1b70140e0b4236","status":"passed","time":{"start":1698788413693,"stop":1698788417371,"duration":3678}},{"uid":"8ebce07c0d410582","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1077//#testresult/8ebce07c0d410582","status":"passed","time":{"start":1698714886950,"stop":1698714893995,"duration":7045}},{"uid":"e6a2020b2e6995e9","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1075//#testresult/e6a2020b2e6995e9","status":"passed","time":{"start":1698701280749,"stop":1698701284576,"duration":3827}},{"uid":"3999dcd717240e0d","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1073//#testresult/3999dcd717240e0d","status":"passed","time":{"start":1698700149779,"stop":1698700153318,"duration":3539}},{"uid":"dbe656a1a2b3a4b0","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1070//#testresult/dbe656a1a2b3a4b0","status":"passed","time":{"start":1698692695430,"stop":1698692698947,"duration":3517}},{"uid":"e407ada7eaa3906a","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1069//#testresult/e407ada7eaa3906a","status":"passed","time":{"start":1698692662428,"stop":1698692666005,"duration":3577}},{"uid":"d6dda23359ca779c","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1066//#testresult/d6dda23359ca779c","status":"passed","time":{"start":1698646223493,"stop":1698646227226,"duration":3733}},{"uid":"c4325dd9ac7a7f89","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1064//#testresult/c4325dd9ac7a7f89","status":"passed","time":{"start":1698628473665,"stop":1698628478693,"duration":5028}},{"uid":"91afeb5bef6247a2","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1062//#testresult/91afeb5bef6247a2","status":"passed","time":{"start":1698615112237,"stop":1698615115994,"duration":3757}},{"uid":"261ae14832633417","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1061//#testresult/261ae14832633417","status":"passed","time":{"start":1698615033300,"stop":1698615036859,"duration":3559}},{"uid":"857fa0fcb38e3669","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1054//#testresult/857fa0fcb38e3669","status":"passed","time":{"start":1698542279646,"stop":1698542283248,"duration":3602}},{"uid":"387eae703145048b","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1053//#testresult/387eae703145048b","status":"passed","time":{"start":1698455470297,"stop":1698455474345,"duration":4048}}]},"tags":[]},"source":"9e60cab3722f3f65.json","parameterValues":["BoltonCouncil"]}