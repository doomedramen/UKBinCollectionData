{"uid":"624dcc7bd8f897d6","name":"Validate Council Output [WiganBoroughCouncil-None-None]","fullName":"features/validate_council_outputs.feature:Validate Council Output","historyId":"54793a8ecd6a8f786ad70bc66f4ba719","time":{"start":1700646566859,"stop":1700646568084,"duration":1225},"status":"failed","statusMessage":"AssertionError: True","statusTrace":"fixturefunc = <function validate_output_step at 0x7f41a5edb010>\nrequest = <FixtureRequest for <Function test_scenario_outline[WiganBoroughCouncil-None-None]>>\nkwargs = {'context': <test_validate_council.context.<locals>.Context object at 0x7f4193f70d00>}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/_pytest/fixtures.py:902: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:102: in validate_output_step\n    raise (err)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncontext = <test_validate_council.context.<locals>.Context object at 0x7f4193f70d00>\n\n    @then(\"the output should validate against the schema\")\n    def validate_output_step(context):\n        try:\n            council_schema = file_handler.load_schema_file(f\"output.schema\")\n            schema_result = file_handler.validate_json_schema(\n                context.parse_result, council_schema\n            )\n>           assert_that(schema_result, True)\nE           AssertionError: True\n\nuk_bin_collection/tests/step_defs/test_validate_council.py:97: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AssertionError: True","statusTrace":"fixturefunc = <function validate_output_step at 0x7f41a5edb010>\nrequest = <FixtureRequest for <Function test_scenario_outline[WiganBoroughCouncil-None-None]>>\nkwargs = {'context': <test_validate_council.context.<locals>.Context object at 0x7f4193f70d00>}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/_pytest/fixtures.py:902: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:102: in validate_output_step\n    raise (err)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncontext = <test_validate_council.context.<locals>.Context object at 0x7f4193f70d00>\n\n    @then(\"the output should validate against the schema\")\n    def validate_output_step(context):\n        try:\n            council_schema = file_handler.load_schema_file(f\"output.schema\")\n            schema_result = file_handler.validate_json_schema(\n                context.parse_result, council_schema\n            )\n>           assert_that(schema_result, True)\nE           AssertionError: True\n\nuk_bin_collection/tests/step_defs/test_validate_council.py:97: AssertionError","steps":[{"name":"Given the council: WiganBoroughCouncil","time":{"start":1700646566859,"stop":1700646566859,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"When we scrape the data from WiganBoroughCouncil using None and the None is set","time":{"start":1700646566860,"stop":1700646568081,"duration":1221},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Then the result is valid json","time":{"start":1700646568082,"stop":1700646568082,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"And the output should validate against the schema","time":{"start":1700646568082,"stop":1700646568084,"duration":2},"status":"failed","statusMessage":"True","statusTrace":"AssertionError: True\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":4,"attachmentsCount":0,"hasContent":true},"afterStages":[],"labels":[{"name":"host","value":"fv-az881-890"},{"name":"thread","value":"2717-MainThread"},{"name":"framework","value":"pytest-bdd"},{"name":"language","value":"cpython3"},{"name":"feature","value":"Test each council output matches expected results"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"WiganBoroughCouncil"},{"name":"selenium_mode","value":"None"},{"name":"selenium_url","value":"None"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":0,"skipped":0,"passed":20,"unknown":0,"total":21},"items":[{"uid":"209e9b6a0edb28f1","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1141//#testresult/209e9b6a0edb28f1","status":"passed","time":{"start":1700616148347,"stop":1700616152489,"duration":4142}},{"uid":"adeb3972b5bd47e8","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1136//#testresult/adeb3972b5bd47e8","status":"passed","time":{"start":1700529893206,"stop":1700529900491,"duration":7285}},{"uid":"a0b08303967cf7b9","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1135//#testresult/a0b08303967cf7b9","status":"passed","time":{"start":1700443258645,"stop":1700443262813,"duration":4168}},{"uid":"d5f8fc7b5122879f","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1134//#testresult/d5f8fc7b5122879f","status":"passed","time":{"start":1700357107045,"stop":1700357111023,"duration":3978}},{"uid":"4e0242bff4e71bed","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1133//#testresult/4e0242bff4e71bed","status":"passed","time":{"start":1700270437155,"stop":1700270441550,"duration":4395}},{"uid":"417c2c9f886188ca","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1132//#testresult/417c2c9f886188ca","status":"passed","time":{"start":1700184082512,"stop":1700184085820,"duration":3308}},{"uid":"8a31bb9cc3c80afa","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1131//#testresult/8a31bb9cc3c80afa","status":"passed","time":{"start":1700097657568,"stop":1700097661729,"duration":4161}},{"uid":"9ed64dc331e8d21a","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1129//#testresult/9ed64dc331e8d21a","status":"passed","time":{"start":1700011380885,"stop":1700011384580,"duration":3695}},{"uid":"4536581fa656b41b","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1128//#testresult/4536581fa656b41b","status":"passed","time":{"start":1699924980318,"stop":1699924984976,"duration":4658}},{"uid":"8cbb3cb9b8e3a4c7","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1127//#testresult/8cbb3cb9b8e3a4c7","status":"passed","time":{"start":1699838636419,"stop":1699838640358,"duration":3939}},{"uid":"7ffe41c339db41f","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1126//#testresult/7ffe41c339db41f","status":"passed","time":{"start":1699752241638,"stop":1699752245328,"duration":3690}},{"uid":"8206b5bc85ed8ee3","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1125//#testresult/8206b5bc85ed8ee3","status":"passed","time":{"start":1699669655467,"stop":1699669663037,"duration":7570}},{"uid":"122d9d2c391c6e22","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1124//#testresult/122d9d2c391c6e22","status":"passed","time":{"start":1699579060237,"stop":1699579063998,"duration":3761}},{"uid":"2b51429390772b4d","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1123//#testresult/2b51429390772b4d","status":"passed","time":{"start":1699492746757,"stop":1699492751119,"duration":4362}},{"uid":"a5e09ef546da6ca1","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1121//#testresult/a5e09ef546da6ca1","status":"passed","time":{"start":1699481348496,"stop":1699481352222,"duration":3726}},{"uid":"8b23ffd7c548fba3","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1117//#testresult/8b23ffd7c548fba3","status":"passed","time":{"start":1699445391223,"stop":1699445394415,"duration":3192}},{"uid":"90f30256b48daf10","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1115//#testresult/90f30256b48daf10","status":"passed","time":{"start":1699406590434,"stop":1699406594749,"duration":4315}},{"uid":"a7eda3f0313b0659","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1114//#testresult/a7eda3f0313b0659","status":"passed","time":{"start":1699320022367,"stop":1699320026250,"duration":3883}},{"uid":"ea6475357e075d14","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1113//#testresult/ea6475357e075d14","status":"passed","time":{"start":1699233665277,"stop":1699233668443,"duration":3166}},{"uid":"99df49e218e7b8ef","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1111//#testresult/99df49e218e7b8ef","status":"passed","time":{"start":1699170779021,"stop":1699170782346,"duration":3325}}]},"tags":[]},"source":"624dcc7bd8f897d6.json","parameterValues":["WiganBoroughCouncil","None","None"]}