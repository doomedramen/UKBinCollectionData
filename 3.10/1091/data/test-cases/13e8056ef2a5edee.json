{"uid":"13e8056ef2a5edee","name":"Validate Council Output [HuntingdonDistrictCouncil]","fullName":"features/validate_council_outputs.feature:Validate Council Output","historyId":"1f15b033b85c0869097090322a2589a2","time":{"start":1698887673197,"stop":1698887674534,"duration":1337},"status":"failed","statusMessage":"AssertionError: True","statusTrace":"fixturefunc = <function validate_output_step at 0x7f5e59adedd0>\nrequest = <FixtureRequest for <Function test_scenario_outline[HuntingdonDistrictCouncil]>>\nkwargs = {'context': <test_validate_council.context.<locals>.Context object at 0x7f5e47a1b130>}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/_pytest/fixtures.py:902: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:90: in validate_output_step\n    raise (err)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncontext = <test_validate_council.context.<locals>.Context object at 0x7f5e47a1b130>\n\n    @then(\"the output should validate against the schema\")\n    def validate_output_step(context):\n        try:\n            council_schema = file_handler.load_schema_file(f\"output.schema\")\n            schema_result = file_handler.validate_json_schema(\n                context.parse_result, council_schema\n            )\n>           assert_that(schema_result, True)\nE           AssertionError: True\n\nuk_bin_collection/tests/step_defs/test_validate_council.py:85: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AssertionError: True","statusTrace":"fixturefunc = <function validate_output_step at 0x7f5e59adedd0>\nrequest = <FixtureRequest for <Function test_scenario_outline[HuntingdonDistrictCouncil]>>\nkwargs = {'context': <test_validate_council.context.<locals>.Context object at 0x7f5e47a1b130>}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/_pytest/fixtures.py:902: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:90: in validate_output_step\n    raise (err)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncontext = <test_validate_council.context.<locals>.Context object at 0x7f5e47a1b130>\n\n    @then(\"the output should validate against the schema\")\n    def validate_output_step(context):\n        try:\n            council_schema = file_handler.load_schema_file(f\"output.schema\")\n            schema_result = file_handler.validate_json_schema(\n                context.parse_result, council_schema\n            )\n>           assert_that(schema_result, True)\nE           AssertionError: True\n\nuk_bin_collection/tests/step_defs/test_validate_council.py:85: AssertionError","steps":[{"name":"Given the council: HuntingdonDistrictCouncil","time":{"start":1698887673197,"stop":1698887673198,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"When we scrape the data from HuntingdonDistrictCouncil","time":{"start":1698887673198,"stop":1698887674531,"duration":1333},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"Then the result is valid json","time":{"start":1698887674531,"stop":1698887674531,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"And the output should validate against the schema","time":{"start":1698887674531,"stop":1698887674534,"duration":3},"status":"failed","statusMessage":"True","statusTrace":"AssertionError: True\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":4,"attachmentsCount":0,"hasContent":true},"afterStages":[],"labels":[{"name":"host","value":"fv-az651-783"},{"name":"thread","value":"2229-MainThread"},{"name":"framework","value":"pytest-bdd"},{"name":"language","value":"cpython3"},{"name":"feature","value":"Test each council output matches expected results in /outputs"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"HuntingdonDistrictCouncil"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":9,"broken":0,"skipped":0,"passed":163,"unknown":0,"total":172},"items":[{"uid":"463375a48be2a9bf","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1090//#testresult/463375a48be2a9bf","status":"failed","statusDetails":"AssertionError: True","time":{"start":1698878353720,"stop":1698878354828,"duration":1108}},{"uid":"2f1f3fe858ef2f23","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1086//#testresult/2f1f3fe858ef2f23","status":"failed","statusDetails":"AssertionError: True","time":{"start":1698867480671,"stop":1698867482290,"duration":1619}},{"uid":"1cc29e2820f1030d","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1087//#testresult/1cc29e2820f1030d","status":"failed","statusDetails":"AssertionError: True","time":{"start":1698867480467,"stop":1698867481484,"duration":1017}},{"uid":"c3e67cc38300ea0b","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1081//#testresult/c3e67cc38300ea0b","status":"failed","statusDetails":"AssertionError: assert False is True","time":{"start":1698801612216,"stop":1698801613253,"duration":1037}},{"uid":"d63d30eea8e5dc5d","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1079//#testresult/d63d30eea8e5dc5d","status":"failed","statusDetails":"AssertionError: assert False is True","time":{"start":1698788503154,"stop":1698788504238,"duration":1084}},{"uid":"f947bc0a9af7fa99","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1077//#testresult/f947bc0a9af7fa99","status":"passed","time":{"start":1698715004520,"stop":1698715005969,"duration":1449}},{"uid":"e567a907b5aa395f","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1075//#testresult/e567a907b5aa395f","status":"passed","time":{"start":1698701376853,"stop":1698701378764,"duration":1911}},{"uid":"8634217acedeb669","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1073//#testresult/8634217acedeb669","status":"passed","time":{"start":1698700235641,"stop":1698700236938,"duration":1297}},{"uid":"6749d8106234cae5","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1070//#testresult/6749d8106234cae5","status":"passed","time":{"start":1698693075332,"stop":1698693076411,"duration":1079}},{"uid":"84b8fa25f770e32b","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1069//#testresult/84b8fa25f770e32b","status":"passed","time":{"start":1698692744264,"stop":1698692745405,"duration":1141}},{"uid":"31bbe4b0d3ff58ce","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1066//#testresult/31bbe4b0d3ff58ce","status":"passed","time":{"start":1698646349067,"stop":1698646350759,"duration":1692}},{"uid":"632ea5802a196788","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1064//#testresult/632ea5802a196788","status":"passed","time":{"start":1698628563050,"stop":1698628564442,"duration":1392}},{"uid":"987e3a2047aac619","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1062//#testresult/987e3a2047aac619","status":"passed","time":{"start":1698615224211,"stop":1698615226049,"duration":1838}},{"uid":"ea20d0a87cc537f7","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1061//#testresult/ea20d0a87cc537f7","status":"passed","time":{"start":1698615111914,"stop":1698615113253,"duration":1339}},{"uid":"b753940a47521bc0","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1054//#testresult/b753940a47521bc0","status":"passed","time":{"start":1698542375148,"stop":1698542376792,"duration":1644}},{"uid":"81a83c10353ac440","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1053//#testresult/81a83c10353ac440","status":"passed","time":{"start":1698455561953,"stop":1698455567326,"duration":5373}},{"uid":"f8c02b2f10764c2e","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1051//#testresult/f8c02b2f10764c2e","status":"passed","time":{"start":1698369238092,"stop":1698369239551,"duration":1459}},{"uid":"d976925c982502ec","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1050//#testresult/d976925c982502ec","status":"passed","time":{"start":1698282856341,"stop":1698282857965,"duration":1624}},{"uid":"2537cfb526bf3e74","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1049//#testresult/2537cfb526bf3e74","status":"passed","time":{"start":1698196513098,"stop":1698196515473,"duration":2375}},{"uid":"6a3aa7d4822be9a8","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1048//#testresult/6a3aa7d4822be9a8","status":"passed","time":{"start":1698178238512,"stop":1698178240257,"duration":1745}}]},"tags":[]},"source":"13e8056ef2a5edee.json","parameterValues":["HuntingdonDistrictCouncil"]}