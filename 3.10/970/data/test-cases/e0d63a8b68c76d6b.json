{"uid":"e0d63a8b68c76d6b","name":"Validate Council Output [MaldonDistrictCouncil]","fullName":"features/validate_council_outputs.feature:Validate Council Output","historyId":"53c5720a05c261e2bad5904bb33e19b7","time":{"start":1696366364050,"stop":1696366395457,"duration":31407},"status":"failed","statusMessage":"ValueError: No bin data found for provided UPRN.","statusTrace":"request = <FixtureRequest for <Function test_scenario_outline[MaldonDistrictCouncil]>>\n_pytest_bdd_example = {'council': 'MaldonDistrictCouncil'}\n\n    @pytest.mark.usefixtures(*func_args)\n    def scenario_wrapper(request: FixtureRequest, _pytest_bdd_example: dict[str, str]) -> Any:\n        scenario = templated_scenario.render(_pytest_bdd_example)\n>       _execute_scenario(feature, scenario, request)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/pytest_bdd/scenario.py:187: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/pytest_bdd/scenario.py:157: in _execute_scenario\n    _execute_step_function(request, scenario, step, step_func)\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/pytest_bdd/scenario.py:127: in _execute_step_function\n    return_value = call_fixture_func(fixturefunc=step_func, request=request, kwargs=kwargs)\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/_pytest/fixtures.py:902: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\nuk_bin_collection/tests/step_defs/test_validate_council.py:62: in scrape_step\n    raise (err)\nuk_bin_collection/tests/step_defs/test_validate_council.py:58: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:71: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:59: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:70: in template_method\n    bin_data_dict = self.parse_data(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <MaldonDistrictCouncil.CouncilClass object at 0x7feaf4e9f880>, page = ''\nkwargs = {'paon': None, 'postcode': None, 'uprn': '100090557253', 'url': 'https://maldon.suez.co.uk/maldon/ServiceSummary', ...}\ndata = {'bins': []}, uprn = '100090557253', response = <Response [500]>\n\n    def parse_data(self, page: str, **kwargs) -> dict:\n        data = {\"bins\": []}\n        uprn = kwargs.get(\"uprn\")\n        check_uprn(uprn)\n    \n        requests.packages.urllib3.disable_warnings()\n        response = requests.get(\n            f\"https://maldon.suez.co.uk/maldon/ServiceSummary?uprn={uprn}\",\n            headers={\"User-Agent\": \"Mozilla/5.0 (Windows NT 6.1; Win64; x64)\"},\n        )\n        if response.status_code != 200:\n>           raise ValueError(\"No bin data found for provided UPRN.\")\nE           ValueError: No bin data found for provided UPRN.\n\nuk_bin_collection/uk_bin_collection/councils/MaldonDistrictCouncil.py:26: ValueError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"ValueError: No bin data found for provided UPRN.","statusTrace":"request = <FixtureRequest for <Function test_scenario_outline[MaldonDistrictCouncil]>>\n_pytest_bdd_example = {'council': 'MaldonDistrictCouncil'}\n\n    @pytest.mark.usefixtures(*func_args)\n    def scenario_wrapper(request: FixtureRequest, _pytest_bdd_example: dict[str, str]) -> Any:\n        scenario = templated_scenario.render(_pytest_bdd_example)\n>       _execute_scenario(feature, scenario, request)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/pytest_bdd/scenario.py:187: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/pytest_bdd/scenario.py:157: in _execute_scenario\n    _execute_step_function(request, scenario, step, step_func)\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/pytest_bdd/scenario.py:127: in _execute_step_function\n    return_value = call_fixture_func(fixturefunc=step_func, request=request, kwargs=kwargs)\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/_pytest/fixtures.py:902: in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\nuk_bin_collection/tests/step_defs/test_validate_council.py:62: in scrape_step\n    raise (err)\nuk_bin_collection/tests/step_defs/test_validate_council.py:58: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:71: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:59: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:70: in template_method\n    bin_data_dict = self.parse_data(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <MaldonDistrictCouncil.CouncilClass object at 0x7feaf4e9f880>, page = ''\nkwargs = {'paon': None, 'postcode': None, 'uprn': '100090557253', 'url': 'https://maldon.suez.co.uk/maldon/ServiceSummary', ...}\ndata = {'bins': []}, uprn = '100090557253', response = <Response [500]>\n\n    def parse_data(self, page: str, **kwargs) -> dict:\n        data = {\"bins\": []}\n        uprn = kwargs.get(\"uprn\")\n        check_uprn(uprn)\n    \n        requests.packages.urllib3.disable_warnings()\n        response = requests.get(\n            f\"https://maldon.suez.co.uk/maldon/ServiceSummary?uprn={uprn}\",\n            headers={\"User-Agent\": \"Mozilla/5.0 (Windows NT 6.1; Win64; x64)\"},\n        )\n        if response.status_code != 200:\n>           raise ValueError(\"No bin data found for provided UPRN.\")\nE           ValueError: No bin data found for provided UPRN.\n\nuk_bin_collection/uk_bin_collection/councils/MaldonDistrictCouncil.py:26: ValueError","steps":[{"name":"Given the council: MaldonDistrictCouncil","time":{"start":1696366364051,"stop":1696366364051,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"When we scrape the data from MaldonDistrictCouncil","time":{"start":1696366364052,"stop":1696366395457,"duration":31405},"status":"failed","statusMessage":"No bin data found for provided UPRN.","statusTrace":"ValueError: No bin data found for provided UPRN.\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":0,"hasContent":true},"afterStages":[],"labels":[{"name":"host","value":"fv-az646-806"},{"name":"thread","value":"2295-MainThread"},{"name":"framework","value":"pytest-bdd"},{"name":"language","value":"cpython3"},{"name":"feature","value":"Test each council output matches expected results in /outputs"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"MaldonDistrictCouncil"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":4,"broken":0,"skipped":0,"passed":102,"unknown":0,"total":106},"items":[{"uid":"600efe8c740c894b","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/969//#testresult/600efe8c740c894b","status":"passed","time":{"start":1696295907014,"stop":1696295908174,"duration":1160}},{"uid":"abea6243c746523a","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/967//#testresult/abea6243c746523a","status":"passed","time":{"start":1696209462855,"stop":1696209463803,"duration":948}},{"uid":"cbfa7e1b6eec7a7","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/966//#testresult/cbfa7e1b6eec7a7","status":"passed","time":{"start":1696123635555,"stop":1696123636640,"duration":1085}},{"uid":"5c229fe50da654ff","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/965//#testresult/5c229fe50da654ff","status":"passed","time":{"start":1696036517422,"stop":1696036518570,"duration":1148}},{"uid":"253bc8197d918ce3","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/964//#testresult/253bc8197d918ce3","status":"passed","time":{"start":1695950252714,"stop":1695950256815,"duration":4101}},{"uid":"981e9a76fa2079c2","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/963//#testresult/981e9a76fa2079c2","status":"passed","time":{"start":1695930632874,"stop":1695930634065,"duration":1191}},{"uid":"4e966c9bc262dbb7","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/962//#testresult/4e966c9bc262dbb7","status":"passed","time":{"start":1695930441857,"stop":1695930443022,"duration":1165}},{"uid":"e0e637f2da013ad1","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/960//#testresult/e0e637f2da013ad1","status":"passed","time":{"start":1695863905184,"stop":1695863906407,"duration":1223}},{"uid":"7c8dfefef5cd376a","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/958//#testresult/7c8dfefef5cd376a","status":"passed","time":{"start":1695852686703,"stop":1695852688842,"duration":2139}},{"uid":"7908902934fed7aa","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/957//#testresult/7908902934fed7aa","status":"passed","time":{"start":1695852583019,"stop":1695852584474,"duration":1455}},{"uid":"2b66312170cfbdaa","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/954//#testresult/2b66312170cfbdaa","status":"passed","time":{"start":1695841598518,"stop":1695841599517,"duration":999}},{"uid":"e8f60752e74aea9c","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/953//#testresult/e8f60752e74aea9c","status":"passed","time":{"start":1695841557233,"stop":1695841558194,"duration":961}},{"uid":"4df20ebdd8bc1eee","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/948//#testresult/4df20ebdd8bc1eee","status":"passed","time":{"start":1695777436215,"stop":1695777437228,"duration":1013}},{"uid":"5aaff2e049ad6289","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/947//#testresult/5aaff2e049ad6289","status":"passed","time":{"start":1695691032722,"stop":1695691033699,"duration":977}},{"uid":"80553b62334b118","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/946//#testresult/80553b62334b118","status":"passed","time":{"start":1695604755897,"stop":1695604759438,"duration":3541}},{"uid":"6b7fb1e90e05cee1","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/945//#testresult/6b7fb1e90e05cee1","status":"passed","time":{"start":1695518559328,"stop":1695518560454,"duration":1126}},{"uid":"483b7e7e3c6a0c88","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/944//#testresult/483b7e7e3c6a0c88","status":"passed","time":{"start":1695431743363,"stop":1695431744765,"duration":1402}},{"uid":"6f02259bf3a897e8","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/943//#testresult/6f02259bf3a897e8","status":"passed","time":{"start":1695345426048,"stop":1695345427189,"duration":1141}},{"uid":"c312a0022c344388","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/942//#testresult/c312a0022c344388","status":"passed","time":{"start":1695259038881,"stop":1695259040097,"duration":1216}},{"uid":"6659dfde999d08da","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/941//#testresult/6659dfde999d08da","status":"passed","time":{"start":1695206314348,"stop":1695206315410,"duration":1062}}]},"tags":[]},"source":"e0d63a8b68c76d6b.json","parameterValues":["MaldonDistrictCouncil"]}