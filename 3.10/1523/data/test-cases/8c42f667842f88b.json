{"uid":"8c42f667842f88b","name":"Validate Council Output [ShropshireCouncil-None-None]","fullName":"features/validate_council_outputs.feature:Validate Council Output","historyId":"ce264c2b81863dd7823b7f779f19b34c","time":{"start":1706142606860,"stop":1706142607805,"duration":945},"status":"failed","statusMessage":"AttributeError: 'NoneType' object has no attribute 'find'","statusTrace":"fixturefunc = <function scrape_step at 0x7fbd12e3b7f0>\nrequest = <FixtureRequest for <Function test_scenario_outline[ShropshireCouncil-None-None]>>\nkwargs = {'context': <test_validate_council.context.<locals>.Context object at 0x7fbd11aa0b80>, 'council': 'ShropshireCouncil', 'selenium_mode': 'None', 'selenium_url': 'None'}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/_pytest/fixtures.py:902: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:92: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:96: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:115: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:66: in template_method\n    bin_data_dict = self.parse_data(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <ShropshireCouncil.CouncilClass object at 0x7fbd11aa1f60>\npage = <Response [404]>\nkwargs = {'headless': True, 'paon': None, 'postcode': None, 'uprn': None, ...}\nsoup = <html>\n<head><title>404 Not Found</title></head>\n<body>\n<center><h1>404 Not Found</h1></center>\n<hr/><center>nginx/1.24.0</center>\n</body>\n</html>\n\ndata = {'bins': []}\n\n    def parse_data(self, page: str, **kwargs) -> dict:\n        # Make a BS4 object\n        soup = BeautifulSoup(page.text, features=\"html.parser\")\n        soup.prettify()\n    \n        # Form a JSON wrapper\n        data = {\"bins\": []}\n    \n        # Find section with bins in\n        sections = (\n            soup.find(\"div\", {\"class\": \"container results-table-wrapper\"})\n>           .find(\"tbody\")\n            .find_all(\"tr\")\n        )\nE       AttributeError: 'NoneType' object has no attribute 'find'\n\nuk_bin_collection/uk_bin_collection/councils/ShropshireCouncil.py:25: AttributeError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AttributeError: 'NoneType' object has no attribute 'find'","statusTrace":"fixturefunc = <function scrape_step at 0x7fbd12e3b7f0>\nrequest = <FixtureRequest for <Function test_scenario_outline[ShropshireCouncil-None-None]>>\nkwargs = {'context': <test_validate_council.context.<locals>.Context object at 0x7fbd11aa0b80>, 'council': 'ShropshireCouncil', 'selenium_mode': 'None', 'selenium_url': 'None'}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/_pytest/fixtures.py:902: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:92: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:96: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:115: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:66: in template_method\n    bin_data_dict = self.parse_data(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <ShropshireCouncil.CouncilClass object at 0x7fbd11aa1f60>\npage = <Response [404]>\nkwargs = {'headless': True, 'paon': None, 'postcode': None, 'uprn': None, ...}\nsoup = <html>\n<head><title>404 Not Found</title></head>\n<body>\n<center><h1>404 Not Found</h1></center>\n<hr/><center>nginx/1.24.0</center>\n</body>\n</html>\n\ndata = {'bins': []}\n\n    def parse_data(self, page: str, **kwargs) -> dict:\n        # Make a BS4 object\n        soup = BeautifulSoup(page.text, features=\"html.parser\")\n        soup.prettify()\n    \n        # Form a JSON wrapper\n        data = {\"bins\": []}\n    \n        # Find section with bins in\n        sections = (\n            soup.find(\"div\", {\"class\": \"container results-table-wrapper\"})\n>           .find(\"tbody\")\n            .find_all(\"tr\")\n        )\nE       AttributeError: 'NoneType' object has no attribute 'find'\n\nuk_bin_collection/uk_bin_collection/councils/ShropshireCouncil.py:25: AttributeError","steps":[{"name":"Given the council: ShropshireCouncil","time":{"start":1706142606860,"stop":1706142606860,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"When we scrape the data from ShropshireCouncil using None and the None is set","time":{"start":1706142606860,"stop":1706142607805,"duration":945},"status":"failed","statusMessage":"'NoneType' object has no attribute 'find'","statusTrace":"AttributeError: 'NoneType' object has no attribute 'find'\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"host","value":"fv-az1144-637"},{"name":"thread","value":"2707-MainThread"},{"name":"framework","value":"pytest-bdd"},{"name":"language","value":"cpython3"},{"name":"feature","value":"Test each council output matches expected results"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"ShropshireCouncil"},{"name":"selenium_mode","value":"None"},{"name":"selenium_url","value":"None"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":0,"skipped":0,"passed":102,"unknown":0,"total":103},"items":[{"uid":"a78e4f3183bab334","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1522//#testresult/a78e4f3183bab334","status":"passed","time":{"start":1706056222878,"stop":1706056227269,"duration":4391}},{"uid":"12fe865b19086217","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1521//#testresult/12fe865b19086217","status":"passed","time":{"start":1705969828023,"stop":1705969832877,"duration":4854}},{"uid":"7795d261619414e6","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1520//#testresult/7795d261619414e6","status":"passed","time":{"start":1705883531811,"stop":1705883536184,"duration":4373}},{"uid":"43b8253589b2d9d7","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1519//#testresult/43b8253589b2d9d7","status":"passed","time":{"start":1705797260325,"stop":1705797264623,"duration":4298}},{"uid":"238f6ad8f6d237d4","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1515//#testresult/238f6ad8f6d237d4","status":"passed","time":{"start":1705710578991,"stop":1705710583298,"duration":4307}},{"uid":"405d128a5eecb0f9","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1511//#testresult/405d128a5eecb0f9","status":"passed","time":{"start":1705624216884,"stop":1705624221009,"duration":4125}},{"uid":"a14aaa2612ce557a","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1505//#testresult/a14aaa2612ce557a","status":"passed","time":{"start":1705537771903,"stop":1705537775977,"duration":4074}},{"uid":"bbd6becc2afd1af3","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1500//#testresult/bbd6becc2afd1af3","status":"passed","time":{"start":1705451370138,"stop":1705451374607,"duration":4469}},{"uid":"25fe0b3d30fcde41","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1499//#testresult/25fe0b3d30fcde41","status":"passed","time":{"start":1705365051637,"stop":1705365056291,"duration":4654}},{"uid":"df5b1745642e09fa","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1492//#testresult/df5b1745642e09fa","status":"passed","time":{"start":1705295719558,"stop":1705295724041,"duration":4483}},{"uid":"69c666c23d388bd1","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1491//#testresult/69c666c23d388bd1","status":"passed","time":{"start":1705295169468,"stop":1705295173936,"duration":4468}},{"uid":"895d5d61000d7e93","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1490//#testresult/895d5d61000d7e93","status":"passed","time":{"start":1705278585815,"stop":1705278590389,"duration":4574}},{"uid":"3ebdad5796cdb0c4","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1485//#testresult/3ebdad5796cdb0c4","status":"passed","time":{"start":1705192248295,"stop":1705192252352,"duration":4057}},{"uid":"791db3616ae2b317","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1484//#testresult/791db3616ae2b317","status":"passed","time":{"start":1705105692107,"stop":1705105697977,"duration":5870}},{"uid":"f5e7750a35dd7d7a","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1482//#testresult/f5e7750a35dd7d7a","status":"passed","time":{"start":1705019285529,"stop":1705019289873,"duration":4344}},{"uid":"ecc3244537908daf","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1478//#testresult/ecc3244537908daf","status":"passed","time":{"start":1704932875069,"stop":1704932879286,"duration":4217}},{"uid":"f09cf30f9db103ea","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1472//#testresult/f09cf30f9db103ea","status":"passed","time":{"start":1704846524336,"stop":1704846528802,"duration":4466}},{"uid":"1f5f905a87e58c64","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1456//#testresult/1f5f905a87e58c64","status":"passed","time":{"start":1704760238068,"stop":1704760242931,"duration":4863}},{"uid":"3b141c86953a80f2","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1452//#testresult/3b141c86953a80f2","status":"passed","time":{"start":1704711601421,"stop":1704711605987,"duration":4566}},{"uid":"1de32cc392c7c2c9","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1450//#testresult/1de32cc392c7c2c9","status":"passed","time":{"start":1704710812648,"stop":1704710817245,"duration":4597}}]},"tags":[]},"source":"8c42f667842f88b.json","parameterValues":["ShropshireCouncil","None","None"]}