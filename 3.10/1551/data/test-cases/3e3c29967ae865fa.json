{"uid":"3e3c29967ae865fa","name":"Validate Council Output [TorbayCouncil-None-None]","fullName":"features/validate_council_outputs.feature:Validate Council Output","historyId":"5195ebd313dac644e0a1a0a50e7ce809","time":{"start":1707265631511,"stop":1707265693925,"duration":62414},"status":"failed","statusMessage":"ValueError: No bin data found for provided UPRN.","statusTrace":"fixturefunc = <function scrape_step at 0x7f9a52b0f1c0>\nrequest = <FixtureRequest for <Function test_scenario_outline[TorbayCouncil-None-None]>>\nkwargs = {'context': <test_validate_council.context.<locals>.Context object at 0x7f9a51c2eb60>, 'council': 'TorbayCouncil', 'selenium_mode': 'None', 'selenium_url': 'None'}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/_pytest/fixtures.py:902: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:92: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:96: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:115: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:78: in template_method\n    bin_data_dict = self.parse_data(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <TorbayCouncil.CouncilClass object at 0x7f9a51b0caf0>, page = ''\nkwargs = {'headless': True, 'paon': None, 'postcode': None, 'uprn': '10024000295', ...}\nuprn = '10024000295'\nheaders = {'Accept': '*/*', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-GB,en-US;q=0.9,en;q=0.8', 'Connection': 'keep-alive', ...}\nresponse = <Response [500]>\n\n    def parse_data(self, page: str, **kwargs) -> dict:\n        uprn = kwargs.get(\"uprn\")\n        check_uprn(uprn)\n    \n        headers = {\n            \"Accept\": \"*/*\",\n            \"Accept-Encoding\": \"gzip, deflate, br\",\n            \"Accept-Language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n            \"Connection\": \"keep-alive\",\n            \"Host\": \"online.torbay.gov.uk\",\n            \"Origin\": \"https://www.torbay.gov.uk\",\n            \"Referer\": \"https://www.torbay.gov.uk/\",\n            \"sec-ch-ua\": '\"Chromium\";v=\"110\", \"Not A(Brand\";v=\"24\", \"Google Chrome\";v=\"110\"',\n            \"sec-ch-ua-mobile\": \"?0\",\n            \"sec-ch-ua-platform\": '\"Windows\"',\n            \"Sec-Fetch-Dest\": \"empty\",\n            \"Sec-Fetch-Mode\": \"cors\",\n            \"Sec-Fetch-Site\": \"same-site\",\n            \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36\",\n        }\n        requests.packages.urllib3.disable_warnings()\n        response = requests.get(\n            f\"https://online.torbay.gov.uk/services.bartec/collections?uprn={uprn}\",\n            headers=headers,\n        )\n        if response.status_code != 200:\n>           raise ValueError(\"No bin data found for provided UPRN.\")\nE           ValueError: No bin data found for provided UPRN.\n\nuk_bin_collection/uk_bin_collection/councils/TorbayCouncil.py:38: ValueError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"ValueError: No bin data found for provided UPRN.","statusTrace":"fixturefunc = <function scrape_step at 0x7f9a52b0f1c0>\nrequest = <FixtureRequest for <Function test_scenario_outline[TorbayCouncil-None-None]>>\nkwargs = {'context': <test_validate_council.context.<locals>.Context object at 0x7f9a51c2eb60>, 'council': 'TorbayCouncil', 'selenium_mode': 'None', 'selenium_url': 'None'}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/_pytest/fixtures.py:902: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:92: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:96: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:115: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:78: in template_method\n    bin_data_dict = self.parse_data(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <TorbayCouncil.CouncilClass object at 0x7f9a51b0caf0>, page = ''\nkwargs = {'headless': True, 'paon': None, 'postcode': None, 'uprn': '10024000295', ...}\nuprn = '10024000295'\nheaders = {'Accept': '*/*', 'Accept-Encoding': 'gzip, deflate, br', 'Accept-Language': 'en-GB,en-US;q=0.9,en;q=0.8', 'Connection': 'keep-alive', ...}\nresponse = <Response [500]>\n\n    def parse_data(self, page: str, **kwargs) -> dict:\n        uprn = kwargs.get(\"uprn\")\n        check_uprn(uprn)\n    \n        headers = {\n            \"Accept\": \"*/*\",\n            \"Accept-Encoding\": \"gzip, deflate, br\",\n            \"Accept-Language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n            \"Connection\": \"keep-alive\",\n            \"Host\": \"online.torbay.gov.uk\",\n            \"Origin\": \"https://www.torbay.gov.uk\",\n            \"Referer\": \"https://www.torbay.gov.uk/\",\n            \"sec-ch-ua\": '\"Chromium\";v=\"110\", \"Not A(Brand\";v=\"24\", \"Google Chrome\";v=\"110\"',\n            \"sec-ch-ua-mobile\": \"?0\",\n            \"sec-ch-ua-platform\": '\"Windows\"',\n            \"Sec-Fetch-Dest\": \"empty\",\n            \"Sec-Fetch-Mode\": \"cors\",\n            \"Sec-Fetch-Site\": \"same-site\",\n            \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36\",\n        }\n        requests.packages.urllib3.disable_warnings()\n        response = requests.get(\n            f\"https://online.torbay.gov.uk/services.bartec/collections?uprn={uprn}\",\n            headers=headers,\n        )\n        if response.status_code != 200:\n>           raise ValueError(\"No bin data found for provided UPRN.\")\nE           ValueError: No bin data found for provided UPRN.\n\nuk_bin_collection/uk_bin_collection/councils/TorbayCouncil.py:38: ValueError","steps":[{"name":"Given the council: TorbayCouncil","time":{"start":1707265631511,"stop":1707265631511,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"When we scrape the data from TorbayCouncil using None and the None is set","time":{"start":1707265631511,"stop":1707265693925,"duration":62414},"status":"failed","statusMessage":"No bin data found for provided UPRN.","statusTrace":"ValueError: No bin data found for provided UPRN.\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"host","value":"fv-az1016-395"},{"name":"thread","value":"2715-MainThread"},{"name":"framework","value":"pytest-bdd"},{"name":"language","value":"cpython3"},{"name":"feature","value":"Test each council output matches expected results"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"TorbayCouncil"},{"name":"selenium_mode","value":"None"},{"name":"selenium_url","value":"None"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":24,"broken":0,"skipped":0,"passed":160,"unknown":0,"total":184},"items":[{"uid":"a68727dc4ead9e0d","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1549//#testresult/a68727dc4ead9e0d","status":"passed","time":{"start":1707179319066,"stop":1707179324362,"duration":5296}},{"uid":"22ebbf81b9158374","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1548//#testresult/22ebbf81b9158374","status":"passed","time":{"start":1707093036731,"stop":1707093040189,"duration":3458}},{"uid":"757a87b7c5a42f6e","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1547//#testresult/757a87b7c5a42f6e","status":"passed","time":{"start":1707006672059,"stop":1707006676980,"duration":4921}},{"uid":"8d3671ab55abb6b8","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1545//#testresult/8d3671ab55abb6b8","status":"passed","time":{"start":1706942000725,"stop":1706942002015,"duration":1290}},{"uid":"5b1e98b8e9d25de","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1544//#testresult/5b1e98b8e9d25de","status":"passed","time":{"start":1706939059686,"stop":1706939060773,"duration":1087}},{"uid":"a2b56d299f731afb","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1542//#testresult/a2b56d299f731afb","status":"passed","time":{"start":1706938572254,"stop":1706938573526,"duration":1272}},{"uid":"e201e8879adbc7c4","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1541//#testresult/e201e8879adbc7c4","status":"passed","time":{"start":1706920157684,"stop":1706920164257,"duration":6573}},{"uid":"3798dbc248f7f089","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1540//#testresult/3798dbc248f7f089","status":"passed","time":{"start":1706833802469,"stop":1706833803954,"duration":1485}},{"uid":"221668efb357377a","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1538//#testresult/221668efb357377a","status":"passed","time":{"start":1706747494790,"stop":1706747497372,"duration":2582}},{"uid":"cae3be281f26618a","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1537//#testresult/cae3be281f26618a","status":"passed","time":{"start":1706661090524,"stop":1706661093429,"duration":2905}},{"uid":"35061622f807651f","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1535//#testresult/35061622f807651f","status":"passed","time":{"start":1706574611761,"stop":1706574649663,"duration":37902}},{"uid":"9a871def34423302","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1534//#testresult/9a871def34423302","status":"passed","time":{"start":1706488278356,"stop":1706488281230,"duration":2874}},{"uid":"7da43407eebf373d","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1531//#testresult/7da43407eebf373d","status":"passed","time":{"start":1706401839242,"stop":1706401846947,"duration":7705}},{"uid":"c6ce808cc74ff886","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1529//#testresult/c6ce808cc74ff886","status":"passed","time":{"start":1706315314476,"stop":1706315322783,"duration":8307}},{"uid":"40798adefc7a91f6","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1528//#testresult/40798adefc7a91f6","status":"passed","time":{"start":1706228935067,"stop":1706228938962,"duration":3895}},{"uid":"efeec6012b0c54da","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1523//#testresult/efeec6012b0c54da","status":"passed","time":{"start":1706142652757,"stop":1706142659433,"duration":6676}},{"uid":"8a5e42c1242bcced","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1522//#testresult/8a5e42c1242bcced","status":"passed","time":{"start":1706056257192,"stop":1706056269522,"duration":12330}},{"uid":"fd3fbc57c1480ed","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1521//#testresult/fd3fbc57c1480ed","status":"passed","time":{"start":1705969859960,"stop":1705969872125,"duration":12165}},{"uid":"711abf1a9d40c10c","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1520//#testresult/711abf1a9d40c10c","status":"passed","time":{"start":1705883589562,"stop":1705883593527,"duration":3965}},{"uid":"19d0360149552dd3","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1519//#testresult/19d0360149552dd3","status":"passed","time":{"start":1705797190423,"stop":1705797199643,"duration":9220}}]},"tags":[]},"source":"3e3c29967ae865fa.json","parameterValues":["TorbayCouncil","None","None"]}