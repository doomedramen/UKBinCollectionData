{"uid":"46e7b92627ccfa57","name":"Validate Council Output [StockportBoroughCouncil-None-None]","fullName":"features/validate_council_outputs.feature:Validate Council Output","historyId":"67d3d09986d06b83f686bb5fa5454bb6","time":{"start":1703294181870,"stop":1703294242309,"duration":60439},"status":"failed","statusMessage":"AssertionError: True","statusTrace":"fixturefunc = <function validate_output_step at 0x7ff98336f490>\nrequest = <FixtureRequest for <Function test_scenario_outline[StockportBoroughCouncil-None-None]>>\nkwargs = {'context': <test_validate_council.context.<locals>.Context object at 0x7ff973a1cdc0>}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/_pytest/fixtures.py:902: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:102: in validate_output_step\n    raise (err)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncontext = <test_validate_council.context.<locals>.Context object at 0x7ff973a1cdc0>\n\n    @then(\"the output should validate against the schema\")\n    def validate_output_step(context):\n        try:\n            council_schema = file_handler.load_schema_file(f\"output.schema\")\n            schema_result = file_handler.validate_json_schema(\n                context.parse_result, council_schema\n            )\n>           assert_that(schema_result, True)\nE           AssertionError: True\n\nuk_bin_collection/tests/step_defs/test_validate_council.py:97: AssertionError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AssertionError: True","statusTrace":"fixturefunc = <function validate_output_step at 0x7ff98336f490>\nrequest = <FixtureRequest for <Function test_scenario_outline[StockportBoroughCouncil-None-None]>>\nkwargs = {'context': <test_validate_council.context.<locals>.Context object at 0x7ff973a1cdc0>}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.10/lib/python3.10/site-packages/_pytest/fixtures.py:902: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:102: in validate_output_step\n    raise (err)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\ncontext = <test_validate_council.context.<locals>.Context object at 0x7ff973a1cdc0>\n\n    @then(\"the output should validate against the schema\")\n    def validate_output_step(context):\n        try:\n            council_schema = file_handler.load_schema_file(f\"output.schema\")\n            schema_result = file_handler.validate_json_schema(\n                context.parse_result, council_schema\n            )\n>           assert_that(schema_result, True)\nE           AssertionError: True\n\nuk_bin_collection/tests/step_defs/test_validate_council.py:97: AssertionError","steps":[{"name":"Given the council: StockportBoroughCouncil","time":{"start":1703294181870,"stop":1703294181870,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"When we scrape the data from StockportBoroughCouncil using None and the None is set","time":{"start":1703294181870,"stop":1703294242307,"duration":60437},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Then the result is valid json","time":{"start":1703294242307,"stop":1703294242307,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"And the output should validate against the schema","time":{"start":1703294242307,"stop":1703294242309,"duration":2},"status":"failed","statusMessage":"True","statusTrace":"AssertionError: True\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":4,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"host","value":"fv-az1433-659"},{"name":"thread","value":"2703-MainThread"},{"name":"framework","value":"pytest-bdd"},{"name":"language","value":"cpython3"},{"name":"feature","value":"Test each council output matches expected results"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"StockportBoroughCouncil"},{"name":"selenium_mode","value":"None"},{"name":"selenium_url","value":"None"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":4,"broken":0,"skipped":0,"passed":79,"unknown":0,"total":83},"items":[{"uid":"c5f7152c493614a4","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1282//#testresult/c5f7152c493614a4","status":"passed","time":{"start":1703207953073,"stop":1703207957234,"duration":4161}},{"uid":"9b7b51c65613f247","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1281//#testresult/9b7b51c65613f247","status":"passed","time":{"start":1703121592548,"stop":1703121596645,"duration":4097}},{"uid":"47412ad5f7d977d7","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1280//#testresult/47412ad5f7d977d7","status":"passed","time":{"start":1703034418337,"stop":1703034421981,"duration":3644}},{"uid":"74153e17b232ba9e","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1279//#testresult/74153e17b232ba9e","status":"passed","time":{"start":1703025005983,"stop":1703025009951,"duration":3968}},{"uid":"60189f9f026c246b","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1276//#testresult/60189f9f026c246b","status":"passed","time":{"start":1702948813873,"stop":1702948816821,"duration":2948}},{"uid":"c552ef8f40bb62b0","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1275//#testresult/c552ef8f40bb62b0","status":"passed","time":{"start":1702862463719,"stop":1702862467019,"duration":3300}},{"uid":"b2f3c555d9ea363f","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1274//#testresult/b2f3c555d9ea363f","status":"passed","time":{"start":1702860089606,"stop":1702860092509,"duration":2903}},{"uid":"94e65a820b84727a","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1272//#testresult/94e65a820b84727a","status":"passed","time":{"start":1702843638689,"stop":1702843641167,"duration":2478}},{"uid":"21bf9cc21c8b6378","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1270//#testresult/21bf9cc21c8b6378","status":"passed","time":{"start":1702809496947,"stop":1702809499641,"duration":2694}},{"uid":"e7a67e49e04e2c3c","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1247//#testresult/e7a67e49e04e2c3c","status":"passed","time":{"start":1702657295138,"stop":1702657302653,"duration":7515}},{"uid":"6c5b889d767f5c12","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1244//#testresult/6c5b889d767f5c12","status":"passed","time":{"start":1702603260699,"stop":1702603264428,"duration":3729}},{"uid":"6ac2d124d97c0b7d","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1243//#testresult/6ac2d124d97c0b7d","status":"passed","time":{"start":1702540250885,"stop":1702540259872,"duration":8987}},{"uid":"f05ca0636c718fdb","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1241//#testresult/f05ca0636c718fdb","status":"passed","time":{"start":1702516774832,"stop":1702516778516,"duration":3684}},{"uid":"b56c287f65150724","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1238//#testresult/b56c287f65150724","status":"passed","time":{"start":1702447608128,"stop":1702447612478,"duration":4350}},{"uid":"7ebde67b3003d27e","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1237//#testresult/7ebde67b3003d27e","status":"passed","time":{"start":1702447512247,"stop":1702447516146,"duration":3899}},{"uid":"b2932909fe5b2650","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1236//#testresult/b2932909fe5b2650","status":"passed","time":{"start":1702430467140,"stop":1702430469961,"duration":2821}},{"uid":"781a2ab5d3b7d9ff","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1232//#testresult/781a2ab5d3b7d9ff","status":"passed","time":{"start":1702366568890,"stop":1702366571579,"duration":2689}},{"uid":"67f84a12936934b7","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1231//#testresult/67f84a12936934b7","status":"passed","time":{"start":1702344035204,"stop":1702344037780,"duration":2576}},{"uid":"cb4b6337008f649e","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1229//#testresult/cb4b6337008f649e","status":"passed","time":{"start":1702257633622,"stop":1702257636090,"duration":2468}},{"uid":"c45000cc56c15e2","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.10/1228//#testresult/c45000cc56c15e2","status":"passed","time":{"start":1702171564858,"stop":1702171572695,"duration":7837}}]},"tags":[]},"source":"46e7b92627ccfa57.json","parameterValues":["StockportBoroughCouncil","None","None"]}