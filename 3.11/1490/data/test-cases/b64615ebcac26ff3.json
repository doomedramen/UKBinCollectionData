{"uid":"b64615ebcac26ff3","name":"Validate Council Output [CalderdaleCouncil-http://selenium:4444-local]","fullName":"features/validate_council_outputs.feature:Validate Council Output","historyId":"f80b0c90a66dd1aff5f349ea68c0d9b4","time":{"start":1705278518618,"stop":1705278519113,"duration":495},"status":"failed","statusMessage":"TypeError: create_webdriver() missing 1 required positional argument: 'user_agent'","statusTrace":"fixturefunc = <function scrape_step at 0x7f0e9b850720>\nrequest = <FixtureRequest for <Function test_scenario_outline[CalderdaleCouncil-http://selenium:4444-local]>>\nkwargs = {'context': <test_validate_council.context.<locals>.Context object at 0x7f0e9b7353d0>, 'council': 'CalderdaleCouncil', 'selenium_mode': 'local', 'selenium_url': 'http://selenium:4444'}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:902: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:92: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:96: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:115: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:78: in template_method\n    bin_data_dict = self.parse_data(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <CalderdaleCouncil.CouncilClass object at 0x7f0e9b801290>, page = ''\nkwargs = {'headless': True, 'paon': None, 'postcode': 'OL14 7EX', 'uprn': '010035034598', ...}\ndriver = None, user_uprn = '010035034598', user_postcode = 'OL14 7EX'\nbin_data_dict = {'bins': []}, collections = [], web_driver = None\nheadless = True\n\n    def parse_data(self, page: str, **kwargs) -> dict:\n        driver = None\n        try:\n            user_uprn = kwargs.get(\"uprn\")\n            user_postcode = kwargs.get(\"postcode\")\n            check_uprn(user_uprn)\n            check_postcode(user_postcode)\n    \n            bin_data_dict = {\"bins\": []}\n            collections = []\n            web_driver = kwargs.get(\"web_driver\")\n            headless = kwargs.get(\"headless\")\n    \n            data = {\"bins\": []}\n    \n            # Get our initial session running\n>           driver = create_webdriver(web_driver, headless)\nE           TypeError: create_webdriver() missing 1 required positional argument: 'user_agent'\n\nuk_bin_collection/uk_bin_collection/councils/CalderdaleCouncil.py:43: TypeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"TypeError: create_webdriver() missing 1 required positional argument: 'user_agent'","statusTrace":"fixturefunc = <function scrape_step at 0x7f0e9b850720>\nrequest = <FixtureRequest for <Function test_scenario_outline[CalderdaleCouncil-http://selenium:4444-local]>>\nkwargs = {'context': <test_validate_council.context.<locals>.Context object at 0x7f0e9b7353d0>, 'council': 'CalderdaleCouncil', 'selenium_mode': 'local', 'selenium_url': 'http://selenium:4444'}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:902: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:92: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:96: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:115: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:78: in template_method\n    bin_data_dict = self.parse_data(\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <CalderdaleCouncil.CouncilClass object at 0x7f0e9b801290>, page = ''\nkwargs = {'headless': True, 'paon': None, 'postcode': 'OL14 7EX', 'uprn': '010035034598', ...}\ndriver = None, user_uprn = '010035034598', user_postcode = 'OL14 7EX'\nbin_data_dict = {'bins': []}, collections = [], web_driver = None\nheadless = True\n\n    def parse_data(self, page: str, **kwargs) -> dict:\n        driver = None\n        try:\n            user_uprn = kwargs.get(\"uprn\")\n            user_postcode = kwargs.get(\"postcode\")\n            check_uprn(user_uprn)\n            check_postcode(user_postcode)\n    \n            bin_data_dict = {\"bins\": []}\n            collections = []\n            web_driver = kwargs.get(\"web_driver\")\n            headless = kwargs.get(\"headless\")\n    \n            data = {\"bins\": []}\n    \n            # Get our initial session running\n>           driver = create_webdriver(web_driver, headless)\nE           TypeError: create_webdriver() missing 1 required positional argument: 'user_agent'\n\nuk_bin_collection/uk_bin_collection/councils/CalderdaleCouncil.py:43: TypeError","steps":[{"name":"Given the council: CalderdaleCouncil","time":{"start":1705278518618,"stop":1705278518619,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"When we scrape the data from CalderdaleCouncil using local and the http://selenium:4444 is set","time":{"start":1705278518619,"stop":1705278519113,"duration":494},"status":"failed","statusMessage":"create_webdriver() missing 1 required positional argument: 'user_agent'","statusTrace":"TypeError: create_webdriver() missing 1 required positional argument: 'user_agent'\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"host","value":"fv-az975-722"},{"name":"thread","value":"2726-MainThread"},{"name":"framework","value":"pytest-bdd"},{"name":"language","value":"cpython3"},{"name":"feature","value":"Test each council output matches expected results"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"CalderdaleCouncil"},{"name":"selenium_mode","value":"local"},{"name":"selenium_url","value":"http://selenium:4444"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":13,"broken":0,"skipped":0,"passed":58,"unknown":0,"total":71},"items":[{"uid":"564c96db3d433619","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1485//#testresult/564c96db3d433619","status":"failed","statusDetails":"TypeError: create_webdriver() missing 1 required positional argument: 'user_agent'","time":{"start":1705192186383,"stop":1705192186627,"duration":244}},{"uid":"ae7ad5e02a9c3c79","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1484//#testresult/ae7ad5e02a9c3c79","status":"failed","statusDetails":"TypeError: create_webdriver() missing 1 required positional argument: 'user_agent'","time":{"start":1705105649688,"stop":1705105650443,"duration":755}},{"uid":"63d1f10e5c76409a","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1482//#testresult/63d1f10e5c76409a","status":"failed","statusDetails":"TypeError: create_webdriver() missing 1 required positional argument: 'user_agent'","time":{"start":1705019225228,"stop":1705019225710,"duration":482}},{"uid":"aa94aae97b1e7d43","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1478//#testresult/aa94aae97b1e7d43","status":"failed","statusDetails":"TypeError: create_webdriver() missing 1 required positional argument: 'user_agent'","time":{"start":1704932816023,"stop":1704932816742,"duration":719}},{"uid":"fd1787a9764d76d4","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1472//#testresult/fd1787a9764d76d4","status":"failed","statusDetails":"TypeError: create_webdriver() missing 1 required positional argument: 'user_agent'","time":{"start":1704846429026,"stop":1704846429103,"duration":77}},{"uid":"7e8dcd54ad6d0a","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1456//#testresult/7e8dcd54ad6d0a","status":"passed","time":{"start":1704760083157,"stop":1704760089447,"duration":6290}},{"uid":"22c7ed9f5ecdc792","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1452//#testresult/22c7ed9f5ecdc792","status":"passed","time":{"start":1704711484669,"stop":1704711490558,"duration":5889}},{"uid":"f0525498dbe7ec00","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1450//#testresult/f0525498dbe7ec00","status":"passed","time":{"start":1704710696621,"stop":1704710702195,"duration":5574}},{"uid":"21fc3b8ce6e85b7","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1448//#testresult/21fc3b8ce6e85b7","status":"passed","time":{"start":1704710080198,"stop":1704710088898,"duration":8700}},{"uid":"bba26bacae0e2a77","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1446//#testresult/bba26bacae0e2a77","status":"passed","time":{"start":1704709554938,"stop":1704709561838,"duration":6900}},{"uid":"c18e2fccc9e41e9","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1443//#testresult/c18e2fccc9e41e9","status":"passed","time":{"start":1704704065328,"stop":1704704072454,"duration":7126}},{"uid":"8e6e1de7483920a5","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1441//#testresult/8e6e1de7483920a5","status":"passed","time":{"start":1704673695028,"stop":1704673700496,"duration":5468}},{"uid":"f87d113094c016a2","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1429//#testresult/f87d113094c016a2","status":"passed","time":{"start":1704626402337,"stop":1704626407577,"duration":5240}},{"uid":"43effd2826d80874","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1426//#testresult/43effd2826d80874","status":"passed","time":{"start":1704615391113,"stop":1704615396095,"duration":4982}},{"uid":"70e49ed0d52094b8","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1423//#testresult/70e49ed0d52094b8","status":"passed","time":{"start":1704614793331,"stop":1704614800849,"duration":7518}},{"uid":"57489f8c0fdf2037","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1421//#testresult/57489f8c0fdf2037","status":"passed","time":{"start":1704614200763,"stop":1704614211248,"duration":10485}},{"uid":"523745428540e743","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1420//#testresult/523745428540e743","status":"passed","time":{"start":1704587431791,"stop":1704587436712,"duration":4921}},{"uid":"aea27c323989bf17","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1413//#testresult/aea27c323989bf17","status":"passed","time":{"start":1704542701746,"stop":1704542709152,"duration":7406}},{"uid":"570fb6f2febabfc5","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1408//#testresult/570fb6f2febabfc5","status":"passed","time":{"start":1704496143648,"stop":1704496148704,"duration":5056}},{"uid":"90371c3a31469238","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1406//#testresult/90371c3a31469238","status":"passed","time":{"start":1704453400635,"stop":1704453407902,"duration":7267}}]},"tags":[]},"source":"b64615ebcac26ff3.json","parameterValues":["CalderdaleCouncil","local","http://selenium:4444"]}