{"uid":"6c8e64c9a77779a3","name":"Validate Council Output [MertonCouncil]","fullName":"features/validate_council_outputs.feature:Validate Council Output","historyId":"36e8dead67440054ce559fdfe42912ec","time":{"start":1724976826480,"stop":1724976836551,"duration":10071},"status":"failed","statusMessage":"AttributeError: 'NoneType' object has no attribute 'find_all'","statusTrace":"fixturefunc = <function scrape_step at 0x7ff198f3cea0>\nrequest = <FixtureRequest for <Function test_scenario_outline[MertonCouncil]>>\nkwargs = {'context': <test_validate_council.Context object at 0x7ff198db5a50>, 'headless_mode': 'True', 'local_browser': 'False', 'selenium_url': 'http://localhost:4444'}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:897: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:100: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:101: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:121: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:61: in template_method\n    bin_data_dict = self.get_and_parse_data(this_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:82: in get_and_parse_data\n    bin_data_dict = self.parse_data(page, url=address_url, **kwargs)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <MertonCouncil.CouncilClass object at 0x7ff198578510>\npage = <Response [200]>\nkwargs = {'council_module_str': 'MertonCouncil', 'dev_mode': False, 'headless': True, 'local_browser': False, ...}\nsoup = \n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.d...</a>\r\n\t\t| Copyright © 2024 Merton Council and its licensors. All rights reserved.\r\n\t</p>\n</div>\n</div>\n</body>\n</html>\n\ndata = {'bins': []}, collections = []\n\n    def parse_data(self, page: str, **kwargs) -> dict:\n        # Make a BS4 object\n        soup = BeautifulSoup(page.text, features=\"html.parser\")\n        soup.prettify()\n    \n        data = {\"bins\": []}\n        collections = []\n    \n        # Search for the specific bin in the table using BS4\n>       rows = soup.find(\"table\", class_=(\"collectiondays\")).find_all(\n            \"tr\",\n            class_=(\n                \"food-caddy\",\n                \"papercard-wheelie\",\n                \"plastics-boxes\",\n                \"rubbish-wheelie\",\n                \"textiles\",\n                \"batteries\",\n            ),\n        )\nE       AttributeError: 'NoneType' object has no attribute 'find_all'\n\nuk_bin_collection/uk_bin_collection/councils/MertonCouncil.py:24: AttributeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AttributeError: 'NoneType' object has no attribute 'find_all'","statusTrace":"fixturefunc = <function scrape_step at 0x7ff198f3cea0>\nrequest = <FixtureRequest for <Function test_scenario_outline[MertonCouncil]>>\nkwargs = {'context': <test_validate_council.Context object at 0x7ff198db5a50>, 'headless_mode': 'True', 'local_browser': 'False', 'selenium_url': 'http://localhost:4444'}\n\n    def call_fixture_func(\n        fixturefunc: _FixtureFunc[FixtureValue], request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:897: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:100: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:101: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:121: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:61: in template_method\n    bin_data_dict = self.get_and_parse_data(this_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:82: in get_and_parse_data\n    bin_data_dict = self.parse_data(page, url=address_url, **kwargs)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <MertonCouncil.CouncilClass object at 0x7ff198578510>\npage = <Response [200]>\nkwargs = {'council_module_str': 'MertonCouncil', 'dev_mode': False, 'headless': True, 'local_browser': False, ...}\nsoup = \n<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.d...</a>\r\n\t\t| Copyright © 2024 Merton Council and its licensors. All rights reserved.\r\n\t</p>\n</div>\n</div>\n</body>\n</html>\n\ndata = {'bins': []}, collections = []\n\n    def parse_data(self, page: str, **kwargs) -> dict:\n        # Make a BS4 object\n        soup = BeautifulSoup(page.text, features=\"html.parser\")\n        soup.prettify()\n    \n        data = {\"bins\": []}\n        collections = []\n    \n        # Search for the specific bin in the table using BS4\n>       rows = soup.find(\"table\", class_=(\"collectiondays\")).find_all(\n            \"tr\",\n            class_=(\n                \"food-caddy\",\n                \"papercard-wheelie\",\n                \"plastics-boxes\",\n                \"rubbish-wheelie\",\n                \"textiles\",\n                \"batteries\",\n            ),\n        )\nE       AttributeError: 'NoneType' object has no attribute 'find_all'\n\nuk_bin_collection/uk_bin_collection/councils/MertonCouncil.py:24: AttributeError","steps":[{"name":"Given the council","time":{"start":1724976826480,"stop":1724976826481,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"When we scrape the data from the council","time":{"start":1724976826481,"stop":1724976836551,"duration":10070},"status":"failed","statusMessage":"'NoneType' object has no attribute 'find_all'","statusTrace":"AttributeError: 'NoneType' object has no attribute 'find_all'\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"5c6f9eae26e32a7a","name":"stdout","source":"5c6f9eae26e32a7a.txt","type":"text/plain","size":40}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"host","value":"fv-az985-830"},{"name":"thread","value":"2838-MainThread"},{"name":"framework","value":"pytest-bdd"},{"name":"language","value":"cpython3"},{"name":"feature","value":"Test each council output matches expected results"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"MertonCouncil"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":251,"broken":0,"skipped":0,"passed":41,"unknown":0,"total":292},"items":[{"uid":"f5d99b5913f3667f","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/2049//#testresult/f5d99b5913f3667f","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1724890453515,"stop":1724890456881,"duration":3366}},{"uid":"bc61ae8347b11011","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/2048//#testresult/bc61ae8347b11011","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1724803974255,"stop":1724804001761,"duration":27506}},{"uid":"c2ab051319735cca","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/2043//#testresult/c2ab051319735cca","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1724717550671,"stop":1724717562703,"duration":12032}},{"uid":"a7ee796796b920f3","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/2039//#testresult/a7ee796796b920f3","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1724631217580,"stop":1724631221928,"duration":4348}},{"uid":"688c7ef95d1e02f6","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/2038//#testresult/688c7ef95d1e02f6","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1724544760212,"stop":1724544767523,"duration":7311}},{"uid":"38675c8f381a7f15","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/2037//#testresult/38675c8f381a7f15","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1724458415273,"stop":1724458420575,"duration":5302}},{"uid":"e1e9676ba3338d40","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/2036//#testresult/e1e9676ba3338d40","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1724371972767,"stop":1724371980533,"duration":7766}},{"uid":"a4484192f9a678f0","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/2034//#testresult/a4484192f9a678f0","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1724285571002,"stop":1724285572561,"duration":1559}},{"uid":"c87043bf02a9c4f5","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/2033//#testresult/c87043bf02a9c4f5","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1724199221376,"stop":1724199228804,"duration":7428}},{"uid":"afb8dade5d2c4937","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/2032//#testresult/afb8dade5d2c4937","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1724112812649,"stop":1724112824971,"duration":12322}},{"uid":"a7565f846a609c38","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/2031//#testresult/a7565f846a609c38","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1724026390018,"stop":1724026391955,"duration":1937}},{"uid":"5992560997caae97","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/2030//#testresult/5992560997caae97","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1723940012021,"stop":1723940035149,"duration":23128}},{"uid":"29974eb80e6dcbe4","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/2029//#testresult/29974eb80e6dcbe4","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1723853576397,"stop":1723853583445,"duration":7048}},{"uid":"fde445d11b022a2c","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/2028//#testresult/fde445d11b022a2c","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1723767190490,"stop":1723767192556,"duration":2066}},{"uid":"6514cf8e74ec4d35","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/2027//#testresult/6514cf8e74ec4d35","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1723680326024,"stop":1723680326730,"duration":706}},{"uid":"ede2e7a9ccc3ec07","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/2026//#testresult/ede2e7a9ccc3ec07","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1723594406400,"stop":1723594417461,"duration":11061}},{"uid":"7db76d842aed2d69","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/2025//#testresult/7db76d842aed2d69","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1723508177768,"stop":1723508230247,"duration":52479}},{"uid":"a452fe7ef1b00b3e","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/2024//#testresult/a452fe7ef1b00b3e","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1723421739069,"stop":1723421780114,"duration":41045}},{"uid":"464b0a532a419260","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/2022//#testresult/464b0a532a419260","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1723335328248,"stop":1723335350140,"duration":21892}},{"uid":"e2dcaee08ca1fc4","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/2020//#testresult/e2dcaee08ca1fc4","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'find_all'","time":{"start":1723248923689,"stop":1723248931612,"duration":7923}}]},"tags":[]},"source":"6c8e64c9a77779a3.json","parameterValues":["MertonCouncil"]}