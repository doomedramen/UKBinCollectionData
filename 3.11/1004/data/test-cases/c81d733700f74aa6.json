{"uid":"c81d733700f74aa6","name":"Validate Council Output [WelhatCouncil]","fullName":"features/validate_council_outputs.feature:Validate Council Output","historyId":"9757596c6a580c04f776b266c6584936","time":{"start":1697419264914,"stop":1697419265047,"duration":133},"status":"failed","statusMessage":"AttributeError: 'str' object has no attribute 'text'","statusTrace":"fixturefunc = <function scrape_step at 0x7f284cedb740>\nrequest = <FixtureRequest for <Function test_scenario_outline[WelhatCouncil]>>\nkwargs = {'context': <test_validate_council.context.<locals>.Context object at 0x7f283ee73190>, 'council': 'WelhatCouncil'}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:902: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:62: in scrape_step\n    raise (err)\nuk_bin_collection/tests/step_defs/test_validate_council.py:58: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:71: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:59: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:70: in template_method\n    bin_data_dict = self.parse_data(\nuk_bin_collection/uk_bin_collection/councils/WelhatCouncil.py:33: in parse_data\n    \"__token\": get_token(page),\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\npage = ''\n\n    def get_token(page) -> str:\n        \"\"\"\n        Get a __token to include in the form data\n            :param page: Page html\n            :return: Form __token\n        \"\"\"\n>       soup = BeautifulSoup(page.text, features=\"html.parser\")\nE       AttributeError: 'str' object has no attribute 'text'\n\nuk_bin_collection/uk_bin_collection/councils/WelhatCouncil.py:13: AttributeError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AttributeError: 'str' object has no attribute 'text'","statusTrace":"fixturefunc = <function scrape_step at 0x7f284cedb740>\nrequest = <FixtureRequest for <Function test_scenario_outline[WelhatCouncil]>>\nkwargs = {'context': <test_validate_council.context.<locals>.Context object at 0x7f283ee73190>, 'council': 'WelhatCouncil'}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:902: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:62: in scrape_step\n    raise (err)\nuk_bin_collection/tests/step_defs/test_validate_council.py:58: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:71: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:59: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:70: in template_method\n    bin_data_dict = self.parse_data(\nuk_bin_collection/uk_bin_collection/councils/WelhatCouncil.py:33: in parse_data\n    \"__token\": get_token(page),\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\npage = ''\n\n    def get_token(page) -> str:\n        \"\"\"\n        Get a __token to include in the form data\n            :param page: Page html\n            :return: Form __token\n        \"\"\"\n>       soup = BeautifulSoup(page.text, features=\"html.parser\")\nE       AttributeError: 'str' object has no attribute 'text'\n\nuk_bin_collection/uk_bin_collection/councils/WelhatCouncil.py:13: AttributeError","steps":[{"name":"Given the council: WelhatCouncil","time":{"start":1697419264914,"stop":1697419264915,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false},{"name":"When we scrape the data from WelhatCouncil","time":{"start":1697419264915,"stop":1697419265047,"duration":132},"status":"failed","statusMessage":"'str' object has no attribute 'text'","statusTrace":"AttributeError: 'str' object has no attribute 'text'\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":0,"hasContent":true},"afterStages":[],"labels":[{"name":"host","value":"fv-az570-444"},{"name":"thread","value":"2118-MainThread"},{"name":"framework","value":"pytest-bdd"},{"name":"language","value":"cpython3"},{"name":"feature","value":"Test each council output matches expected results in /outputs"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"WelhatCouncil"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":128,"broken":0,"skipped":0,"passed":0,"unknown":0,"total":128},"items":[{"uid":"6ef22ba010102066","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1001//#testresult/6ef22ba010102066","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1697403363852,"stop":1697403363960,"duration":108}},{"uid":"d6e1b87b4bbe1dc7","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/998//#testresult/d6e1b87b4bbe1dc7","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1697399995839,"stop":1697399996562,"duration":723}},{"uid":"b1c2e2ab2d95c4d5","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/994//#testresult/b1c2e2ab2d95c4d5","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1697367248226,"stop":1697367248477,"duration":251}},{"uid":"7cf8e391f71a893","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/993//#testresult/7cf8e391f71a893","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1697367162733,"stop":1697367162852,"duration":119}},{"uid":"9c5f08f2a5e30128","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/992//#testresult/9c5f08f2a5e30128","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1697333074826,"stop":1697333075105,"duration":279}},{"uid":"c7b3cd6022465da7","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/988//#testresult/c7b3cd6022465da7","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1697246237662,"stop":1697246237867,"duration":205}},{"uid":"a541baf30a052978","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/986//#testresult/a541baf30a052978","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1697160088012,"stop":1697160088132,"duration":120}},{"uid":"1ded096a3a236838","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/985//#testresult/1ded096a3a236838","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1697073452630,"stop":1697073452741,"duration":111}},{"uid":"ffd4453758e4819a","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/984//#testresult/ffd4453758e4819a","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1697053093131,"stop":1697053093252,"duration":121}},{"uid":"51babb19aa7d2ede","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/981//#testresult/51babb19aa7d2ede","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1697051014142,"stop":1697051014418,"duration":276}},{"uid":"c87274937995f51e","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/978//#testresult/c87274937995f51e","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1696987114570,"stop":1696987115016,"duration":446}},{"uid":"5f3aff789ca4b843","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/977//#testresult/5f3aff789ca4b843","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1696900721004,"stop":1696900721653,"duration":649}},{"uid":"ed264f52dcab5134","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/976//#testresult/ed264f52dcab5134","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1696814376242,"stop":1696814376494,"duration":252}},{"uid":"e8d3a1fc635389f7","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/975//#testresult/e8d3a1fc635389f7","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1696728210061,"stop":1696728210317,"duration":256}},{"uid":"65fd8cf184a6cbda","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/974//#testresult/65fd8cf184a6cbda","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1696641510008,"stop":1696641510586,"duration":578}},{"uid":"86923bedd574157d","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/973//#testresult/86923bedd574157d","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1696555215627,"stop":1696555216079,"duration":452}},{"uid":"40475da94524c184","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/972//#testresult/40475da94524c184","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1696468930935,"stop":1696468931137,"duration":202}},{"uid":"e7f2f726c7ec065e","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/971//#testresult/e7f2f726c7ec065e","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1696382434562,"stop":1696382435141,"duration":579}},{"uid":"61d25e26bba8a231","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/970//#testresult/61d25e26bba8a231","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1696366698387,"stop":1696366698645,"duration":258}},{"uid":"f51167358e839dc0","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/969//#testresult/f51167358e839dc0","status":"failed","statusDetails":"AttributeError: 'str' object has no attribute 'text'","time":{"start":1696295940748,"stop":1696295940929,"duration":181}}]},"tags":[]},"source":"c81d733700f74aa6.json","parameterValues":["WelhatCouncil"]}