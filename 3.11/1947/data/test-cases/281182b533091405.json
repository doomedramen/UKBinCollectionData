{"uid":"281182b533091405","name":"Validate Council Output [BirminghamCityCouncil]","fullName":"features/validate_council_outputs.feature:Validate Council Output","historyId":"313cc1f1f7b9b6b24f90c433ebf257d0","time":{"start":1718756976119,"stop":1718756977781,"duration":1662},"status":"failed","statusMessage":"AttributeError: 'NoneType' object has no attribute 'get'","statusTrace":"fixturefunc = <function scrape_step at 0x7f927a256a20>\nrequest = <FixtureRequest for <Function test_scenario_outline[BirminghamCityCouncil]>>\nkwargs = {'context': <test_validate_council.Context object at 0x7f927bf16950>, 'headless_mode': 'True', 'local_browser': 'False', 'selenium_url': 'http://localhost:4444'}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:887: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:100: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:101: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:121: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:61: in template_method\n    bin_data_dict = self.get_and_parse_data(this_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:82: in get_and_parse_data\n    bin_data_dict = self.parse_data(page, url=address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/councils/BirminghamCityCouncil.py:80: in parse_data\n    \"__token\": get_token(page),\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\npage = <Response [200]>\n\n    def get_token(page) -> str:\n        \"\"\"\n        Get a __token to include in the form data\n            :param page: Page html\n            :return: Form __token\n        \"\"\"\n        soup = BeautifulSoup(page.text, features=\"html.parser\")\n        soup.prettify()\n>       token = soup.find(\"input\", {\"name\": \"__token\"}).get(\"value\")\nE       AttributeError: 'NoneType' object has no attribute 'get'\n\nuk_bin_collection/uk_bin_collection/councils/BirminghamCityCouncil.py:23: AttributeError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AttributeError: 'NoneType' object has no attribute 'get'","statusTrace":"fixturefunc = <function scrape_step at 0x7f927a256a20>\nrequest = <FixtureRequest for <Function test_scenario_outline[BirminghamCityCouncil]>>\nkwargs = {'context': <test_validate_council.Context object at 0x7f927bf16950>, 'headless_mode': 'True', 'local_browser': 'False', 'selenium_url': 'http://localhost:4444'}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:887: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:100: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:101: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:121: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:61: in template_method\n    bin_data_dict = self.get_and_parse_data(this_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:82: in get_and_parse_data\n    bin_data_dict = self.parse_data(page, url=address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/councils/BirminghamCityCouncil.py:80: in parse_data\n    \"__token\": get_token(page),\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\npage = <Response [200]>\n\n    def get_token(page) -> str:\n        \"\"\"\n        Get a __token to include in the form data\n            :param page: Page html\n            :return: Form __token\n        \"\"\"\n        soup = BeautifulSoup(page.text, features=\"html.parser\")\n        soup.prettify()\n>       token = soup.find(\"input\", {\"name\": \"__token\"}).get(\"value\")\nE       AttributeError: 'NoneType' object has no attribute 'get'\n\nuk_bin_collection/uk_bin_collection/councils/BirminghamCityCouncil.py:23: AttributeError","steps":[{"name":"Given the council","time":{"start":1718756976119,"stop":1718756976120,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"When we scrape the data from the council","time":{"start":1718756976120,"stop":1718756977781,"duration":1661},"status":"failed","statusMessage":"'NoneType' object has no attribute 'get'","statusTrace":"AttributeError: 'NoneType' object has no attribute 'get'\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"b22de0452ceba5cc","name":"stdout","source":"b22de0452ceba5cc.txt","type":"text/plain","size":48}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"host","value":"fv-az1766-298"},{"name":"thread","value":"2705-MainThread"},{"name":"framework","value":"pytest-bdd"},{"name":"language","value":"cpython3"},{"name":"feature","value":"Test each council output matches expected results"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"BirminghamCityCouncil"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":2,"broken":0,"skipped":0,"passed":42,"unknown":0,"total":44},"items":[{"uid":"ee2b46827aa9ddb6","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1946//#testresult/ee2b46827aa9ddb6","status":"passed","time":{"start":1718670570388,"stop":1718670574541,"duration":4153}},{"uid":"43b4ed318642c8a3","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1945//#testresult/43b4ed318642c8a3","status":"passed","time":{"start":1718584340344,"stop":1718584344544,"duration":4200}},{"uid":"9ed65e480093a730","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1944//#testresult/9ed65e480093a730","status":"passed","time":{"start":1718497989287,"stop":1718497994011,"duration":4724}},{"uid":"edecfe90bc072676","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1943//#testresult/edecfe90bc072676","status":"passed","time":{"start":1718411341551,"stop":1718411347354,"duration":5803}},{"uid":"e1b203ee4f6461ee","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1942//#testresult/e1b203ee4f6461ee","status":"passed","time":{"start":1718324921533,"stop":1718324925557,"duration":4024}},{"uid":"66e5d5f3a136e61b","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1939//#testresult/66e5d5f3a136e61b","status":"passed","time":{"start":1718238533104,"stop":1718238536227,"duration":3123}},{"uid":"fbb07bc5cb782f08","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1938//#testresult/fbb07bc5cb782f08","status":"passed","time":{"start":1718152147867,"stop":1718152152176,"duration":4309}},{"uid":"75dd2e6506412e6f","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1937//#testresult/75dd2e6506412e6f","status":"passed","time":{"start":1718065756035,"stop":1718065760714,"duration":4679}},{"uid":"9aa2c2ccd6589360","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1936//#testresult/9aa2c2ccd6589360","status":"passed","time":{"start":1717979460737,"stop":1717979466250,"duration":5513}},{"uid":"552d0439df5513a2","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1934//#testresult/552d0439df5513a2","status":"passed","time":{"start":1717893158164,"stop":1717893163622,"duration":5458}},{"uid":"f60216d44a853105","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1933//#testresult/f60216d44a853105","status":"passed","time":{"start":1717806545354,"stop":1717806549421,"duration":4067}},{"uid":"9a08e45e852dc285","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1932//#testresult/9a08e45e852dc285","status":"passed","time":{"start":1717720159009,"stop":1717720163203,"duration":4194}},{"uid":"4611b959e545d1cf","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1927//#testresult/4611b959e545d1cf","status":"passed","time":{"start":1717633766660,"stop":1717633769461,"duration":2801}},{"uid":"74c512ae743a83f4","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1925//#testresult/74c512ae743a83f4","status":"passed","time":{"start":1717622352017,"stop":1717622357246,"duration":5229}},{"uid":"f8aee28f6cb532b4","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1924//#testresult/f8aee28f6cb532b4","status":"passed","time":{"start":1717547363496,"stop":1717547367720,"duration":4224}},{"uid":"60daa6fcf6eae3d2","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1923//#testresult/60daa6fcf6eae3d2","status":"failed","statusDetails":"AttributeError: 'NoneType' object has no attribute 'get'","time":{"start":1717460916110,"stop":1717460917273,"duration":1163}},{"uid":"1b7f0efb1d73621f","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1921//#testresult/1b7f0efb1d73621f","status":"passed","time":{"start":1717374630731,"stop":1717374635223,"duration":4492}},{"uid":"78f52f1869d1ae1e","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1919//#testresult/78f52f1869d1ae1e","status":"passed","time":{"start":1717331842606,"stop":1717331847190,"duration":4584}},{"uid":"dca41b374bfd9a34","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1911//#testresult/dca41b374bfd9a34","status":"passed","time":{"start":1717316310254,"stop":1717316312985,"duration":2731}},{"uid":"2d60a30df8fbec5b","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1908//#testresult/2d60a30df8fbec5b","status":"passed","time":{"start":1717288262080,"stop":1717288267360,"duration":5280}}]},"tags":[]},"source":"281182b533091405.json","parameterValues":["BirminghamCityCouncil"]}