{"uid":"60daa6fcf6eae3d2","name":"Validate Council Output [BirminghamCityCouncil]","fullName":"features/validate_council_outputs.feature:Validate Council Output","historyId":"313cc1f1f7b9b6b24f90c433ebf257d0","time":{"start":1717460916110,"stop":1717460917273,"duration":1163},"status":"failed","statusMessage":"AttributeError: 'NoneType' object has no attribute 'get'","statusTrace":"fixturefunc = <function scrape_step at 0x7f19889fe480>\nrequest = <FixtureRequest for <Function test_scenario_outline[BirminghamCityCouncil]>>\nkwargs = {'context': <test_validate_council.Context object at 0x7f19886a3690>, 'headless_mode': 'True', 'local_browser': 'False', 'selenium_url': 'http://localhost:4444'}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:884: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:100: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:102: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:121: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:68: in template_method\n    bin_data_dict = self.parse_data(\nuk_bin_collection/uk_bin_collection/councils/BirminghamCityCouncil.py:67: in parse_data\n    \"__token\": get_token(page),\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\npage = <Response [200]>\n\n    def get_token(page) -> str:\n        \"\"\"\n        Get a __token to include in the form data\n            :param page: Page html\n            :return: Form __token\n        \"\"\"\n        soup = BeautifulSoup(page.text, features=\"html.parser\")\n        soup.prettify()\n>       token = soup.find(\"input\", {\"name\": \"__token\"}).get(\"value\")\nE       AttributeError: 'NoneType' object has no attribute 'get'\n\nuk_bin_collection/uk_bin_collection/councils/BirminghamCityCouncil.py:16: AttributeError","flaky":false,"newFailed":true,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"status":"failed","statusMessage":"AttributeError: 'NoneType' object has no attribute 'get'","statusTrace":"fixturefunc = <function scrape_step at 0x7f19889fe480>\nrequest = <FixtureRequest for <Function test_scenario_outline[BirminghamCityCouncil]>>\nkwargs = {'context': <test_validate_council.Context object at 0x7f19886a3690>, 'headless_mode': 'True', 'local_browser': 'False', 'selenium_url': 'http://localhost:4444'}\n\n    def call_fixture_func(\n        fixturefunc: \"_FixtureFunc[FixtureValue]\", request: FixtureRequest, kwargs\n    ) -> FixtureValue:\n        if is_generator(fixturefunc):\n            fixturefunc = cast(\n                Callable[..., Generator[FixtureValue, None, None]], fixturefunc\n            )\n            generator = fixturefunc(**kwargs)\n            try:\n                fixture_result = next(generator)\n            except StopIteration:\n                raise ValueError(f\"{request.fixturename} did not yield a value\") from None\n            finalizer = functools.partial(_teardown_yield_fixture, fixturefunc, generator)\n            request.addfinalizer(finalizer)\n        else:\n            fixturefunc = cast(Callable[..., FixtureValue], fixturefunc)\n>           fixture_result = fixturefunc(**kwargs)\n\n../../../.cache/pypoetry/virtualenvs/uk-bin-collection-EwS6Gn8s-py3.11/lib/python3.11/site-packages/_pytest/fixtures.py:884: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \nuk_bin_collection/tests/step_defs/test_validate_council.py:100: in scrape_step\n    context.parse_result = CollectData.run()\nuk_bin_collection/uk_bin_collection/collect_data.py:102: in run\n    return self.client_code(\nuk_bin_collection/uk_bin_collection/collect_data.py:121: in client_code\n    return get_bin_data_class.template_method(address_url, **kwargs)\nuk_bin_collection/uk_bin_collection/get_bin_data.py:68: in template_method\n    bin_data_dict = self.parse_data(\nuk_bin_collection/uk_bin_collection/councils/BirminghamCityCouncil.py:67: in parse_data\n    \"__token\": get_token(page),\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\npage = <Response [200]>\n\n    def get_token(page) -> str:\n        \"\"\"\n        Get a __token to include in the form data\n            :param page: Page html\n            :return: Form __token\n        \"\"\"\n        soup = BeautifulSoup(page.text, features=\"html.parser\")\n        soup.prettify()\n>       token = soup.find(\"input\", {\"name\": \"__token\"}).get(\"value\")\nE       AttributeError: 'NoneType' object has no attribute 'get'\n\nuk_bin_collection/uk_bin_collection/councils/BirminghamCityCouncil.py:16: AttributeError","steps":[{"name":"Given the council","time":{"start":1717460916110,"stop":1717460916111,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"When we scrape the data from the council","time":{"start":1717460916111,"stop":1717460917273,"duration":1162},"status":"failed","statusMessage":"'NoneType' object has no attribute 'get'","statusTrace":"AttributeError: 'NoneType' object has no attribute 'get'\n","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"d04bfbd9fd4488e0","name":"stdout","source":"d04bfbd9fd4488e0.txt","type":"text/plain","size":48}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":2,"attachmentsCount":1,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"host","value":"fv-az777-673"},{"name":"thread","value":"2676-MainThread"},{"name":"framework","value":"pytest-bdd"},{"name":"language","value":"cpython3"},{"name":"feature","value":"Test each council output matches expected results"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"council","value":"BirminghamCityCouncil"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"history":{"statistic":{"failed":1,"broken":0,"skipped":0,"passed":27,"unknown":0,"total":28},"items":[{"uid":"1b7f0efb1d73621f","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1921//#testresult/1b7f0efb1d73621f","status":"passed","time":{"start":1717374630731,"stop":1717374635223,"duration":4492}},{"uid":"78f52f1869d1ae1e","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1919//#testresult/78f52f1869d1ae1e","status":"passed","time":{"start":1717331842606,"stop":1717331847190,"duration":4584}},{"uid":"dca41b374bfd9a34","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1911//#testresult/dca41b374bfd9a34","status":"passed","time":{"start":1717316310254,"stop":1717316312985,"duration":2731}},{"uid":"2d60a30df8fbec5b","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1908//#testresult/2d60a30df8fbec5b","status":"passed","time":{"start":1717288262080,"stop":1717288267360,"duration":5280}},{"uid":"2fe856f6e5e76d14","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1905//#testresult/2fe856f6e5e76d14","status":"passed","time":{"start":1717201901159,"stop":1717201905251,"duration":4092}},{"uid":"82b20518d79c4cbd","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1904//#testresult/82b20518d79c4cbd","status":"passed","time":{"start":1717115278260,"stop":1717115282015,"duration":3755}},{"uid":"6cf9c96a9a380275","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1903//#testresult/6cf9c96a9a380275","status":"passed","time":{"start":1717028927372,"stop":1717028930333,"duration":2961}},{"uid":"64e7d119df066293","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1898//#testresult/64e7d119df066293","status":"passed","time":{"start":1716942611181,"stop":1716942613949,"duration":2768}},{"uid":"cb2cc397c57653f7","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1893//#testresult/cb2cc397c57653f7","status":"passed","time":{"start":1716856096303,"stop":1716856100320,"duration":4017}},{"uid":"bcc472a93172adaa","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1883//#testresult/bcc472a93172adaa","status":"passed","time":{"start":1716769798262,"stop":1716769803495,"duration":5233}},{"uid":"90e1457957f004ad","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1881//#testresult/90e1457957f004ad","status":"passed","time":{"start":1716753118601,"stop":1716753122400,"duration":3799}},{"uid":"5a4b6bc6578dffe0","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1877//#testresult/5a4b6bc6578dffe0","status":"passed","time":{"start":1716743263681,"stop":1716743266816,"duration":3135}},{"uid":"41f4d905d666ff65","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1871//#testresult/41f4d905d666ff65","status":"passed","time":{"start":1716709837775,"stop":1716709840760,"duration":2985}},{"uid":"e29cdbb97ca50161","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1866//#testresult/e29cdbb97ca50161","status":"passed","time":{"start":1716705139556,"stop":1716705142810,"duration":3254}},{"uid":"7ad2bdd3933487b5","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1865//#testresult/7ad2bdd3933487b5","status":"passed","time":{"start":1716683486606,"stop":1716683492701,"duration":6095}},{"uid":"617e50db1ac9c20d","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1863//#testresult/617e50db1ac9c20d","status":"passed","time":{"start":1716624867980,"stop":1716624871435,"duration":3455}},{"uid":"6582eb88ad2ff4ab","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1862//#testresult/6582eb88ad2ff4ab","status":"passed","time":{"start":1716596818985,"stop":1716596832936,"duration":13951}},{"uid":"f7e603970936b0f6","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1856//#testresult/f7e603970936b0f6","status":"passed","time":{"start":1716510505657,"stop":1716510509406,"duration":3749}},{"uid":"f7adf20fecabf3b0","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1855//#testresult/f7adf20fecabf3b0","status":"passed","time":{"start":1716424199162,"stop":1716424203353,"duration":4191}},{"uid":"6ab051698f18941f","reportUrl":"https://robbrad.github.io/UKBinCollectionData/3.11/1854//#testresult/6ab051698f18941f","status":"passed","time":{"start":1716337638438,"stop":1716337651392,"duration":12954}}]},"tags":[]},"source":"60daa6fcf6eae3d2.json","parameterValues":["BirminghamCityCouncil"]}